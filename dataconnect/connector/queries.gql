# Queries
query GetUserProfile($userId: String!) @auth(level: USER) {
  user(id: $userId) {
    id
    username
    email
    displayname
    avatarUrl
    role
    createdAt
  }
}

query GetStoryWithContent($storyId: String!) {
  story(id: $storyId) {
    id
    title
    genre
    description
    coverImageUrl
    status
    createdAt
    storyContent {
      id
      textContent
      pageNumber
    }
  }
}

query ListStoriesByUser($userId: String!) @auth(level: USER) {
  stories(where: { creator: { id: { _eq: $userId } } }) {
    id
    title
    genre
    status
    updatedAt
  }
}

query ListPublishedStories {
  stories(where: { status: { _eq: "published" } }) {
    id
    title
    genre
    coverImageUrl
    creator {
      displayname
    }
  }
}

query IsUsernameAvailable($username: String!) {
  users(where: { username: { _eq: $username } }) {
    id
  }
}
